Create a Release Approval issue for production deployment tracking.

## Usage

```
/create-release-approval
/create-release-approval <version>
/create-release-approval v1.2.0
```

## Description

Automatically generates a comprehensive Release Approval issue when preparing to deploy to production. This issue aggregates all changes from staging/main into production, providing stakeholders with visibility and an approval checkpoint.

Perfect for:
- Production releases requiring approval
- Stakeholder visibility into what's being deployed
- Release documentation and audit trail
- Teams with formal release processes
- Regulated industries requiring deployment approval

## Workflow

### Step 1: Version Detection

```
You: "/create-release-approval v1.2.0"

Claude: "Analyzing commits between {{branches.staging}} and {{branches.prod}}..."

        "Found 8 issues to include in release v1.2.0"
```

If no version provided, Claude asks:
```
Claude: "What version number for this release?"
        "Examples: v1.2.0, 2025.01.21, sprint-15"

You: "v1.2.0"
```

### Step 2: Assignee Selection

```
Claude: "Who should approve this release?"

        Options:
        1. Jane Bloggs (alice@company.com) - Release Manager
        2. Joe Bloggs (bob@company.com) - Tech Lead
        3. Sarah Bloggs (carol@company.com) - Product Manager
        4. No assignee (team will triage)
        5. Custom (specify email)

Your choice [1]: _
```

### Step 3: Release Analysis

Claude analyzes commits between branches:

```
Claude: "Analyzing changes..."

        ✓ Fetched commits from {{branches.staging}}..{{branches.prod}}
        ✓ Extracted 8 Linear issue IDs
        ✓ Retrieved issue details from Linear
        ✓ Categorized by type (3 bugs, 2 features, 3 improvements)
```

### Step 4: Issue Creation

```
Claude: "Creating release approval issue..."

        ✓ Issue created: {{formats.issueExample}} - Release Approval: v1.2.0
        ✓ Linked 8 related issues
        ✓ Assigned to: Jane Bloggs
        ✓ Status: Review Required
        ✓ Priority: High

        Linear URL: https://linear.app/{{linear.workspaceName}}/issue/{{formats.issueExample}}
```

### Step 5: PR Integration (Optional)

If called from `/create-pr` workflow:

```
Claude: "Should I include this in the PR description? (Y/n)"

You: "y"

Claude: "✓ Release approval issue added to PR description"
        "✓ PR linked to release approval issue"
```

## Release Approval Issue Format

The created Linear issue includes:

### Title
```
Release Approval: v1.2.0 - January 21, 2025
```

### Description
```markdown
A summary of recent changes awaiting review for release v1.2.0.

This release includes 8 changes across bug fixes, features, and improvements.

Release Date: January 21, 2025
Target Branch: {{branches.prod}}

---

## Changes in This Release

### Bug Fixes (3)

#### [DEV-123: Fix Overflow Menu](https://linear.app/workspace/issue/DEV-123)
**Issue:** Overflow menu not appearing on mobile devices
**Fix:** Updated CSS z-index and positioning logic to ensure menu appears above all content

#### [DEV-145: Resolve Login Timeout](https://linear.app/workspace/issue/DEV-145)
**Issue:** Users being logged out too quickly (5 minute timeout)
**Fix:** Extended session timeout to 24 hours, added "Remember me" option

#### [DEV-189: Fix Data Export Edge Case](https://linear.app/workspace/issue/DEV-189)
**Issue:** CSV export failing for datasets >10k rows
**Fix:** Implemented streaming export with chunked processing

### New Features (2)

#### [DEV-156: Add User Authentication](https://linear.app/workspace/issue/DEV-156)
**Feature:** Secure login system with password reset
**Implemented:** JWT-based authentication with email/password, bcrypt hashing, password reset flow

#### [DEV-178: Implement Dark Mode](https://linear.app/workspace/issue/DEV-178)
**Feature:** User-requested dark theme for reduced eye strain
**Implemented:** Theme toggle in settings, respects system preferences, persistent user choice

### Improvements (3)

#### [DEV-167: Optimize Database Queries](https://linear.app/workspace/issue/DEV-167)
**Improvement:** Slow query performance on reports page (8-12s load time)
**Implemented:** Added composite indexes, query optimization, reduced load time to <2s

#### [DEV-190: Enhance Error Messages](https://linear.app/workspace/issue/DEV-190)
**Improvement:** Generic error messages confusing users
**Implemented:** Contextual error messages with actionable guidance and help links

#### [DEV-201: Add Loading States](https://linear.app/workspace/issue/DEV-201)
**Improvement:** No feedback during async operations
**Implemented:** Skeleton loaders, progress indicators, optimistic UI updates

---

## Approval Checklist

- [ ] All features tested in staging environment
- [ ] No critical bugs reported in last 48 hours
- [ ] Documentation updated (user guides, API docs)
- [ ] Stakeholders notified of deployment window
- [ ] Database migrations tested and reviewed
- [ ] Rollback plan documented and tested
- [ ] Monitoring and alerts configured
- [ ] Ready for production deployment

## Related Information

**Related PRs:**
- PR #234: {{branches.staging}} → {{branches.prod}} (pending approval)

**Deployment Window:**
- Scheduled: January 21, 2025, 10:00 PM EST
- Duration: ~30 minutes
- Expected downtime: None (rolling deployment)

**Rollback Plan:**
- Revert PR #234
- Restore database snapshot from pre-deployment
- Estimated rollback time: 15 minutes

**Monitoring:**
- Error rates: Datadog dashboard
- Performance metrics: New Relic APM
- User feedback: Linear support channel

---

**Release Manager:** @alice
**Tech Lead:** @bob
**On-Call Engineer:** @carol
```

### Metadata

- **Status:** Review Required ({{linear.statuses.reviewRequired}})
- **Priority:** High (1)
- **Labels:** `release`, `approval`, `v1.2.0`
- **Related Issues:** All 8 issues linked
- **Assignee:** Selected team member

## Examples

### Example 1: Quick Release Approval

```
You: "/create-release-approval v1.2.0"

Claude: "Analyzing commits between {{branches.staging}} and {{branches.prod}}..."
        "Found 8 issues to include in release v1.2.0"

        "Who should approve this release?"
        "1. Jane Bloggs - Release Manager"
        "2. Joe Bloggs - Tech Lead"
        "3. No assignee"

You: "1"

Claude: [Creates release approval issue with all 8 issues]

        "✓ Release approval created: {{formats.issueExample}}"
        "✓ Assigned to: Jane Bloggs"
        "✓ Linked 8 issues"

        "Linear URL: https://linear.app/.../{{formats.issueExample}}"
```

### Example 2: From PR Workflow

```
You: "/create-pr"

Claude: "Creating PR to {{branches.prod}}..."

        "This looks like a release PR!"
        "Would you like to create a Release Approval issue? (Y/n)"

You: "y"

Claude: "What version number for this release?"
You: "v2.0.0"

Claude: [Analyzes commits, creates release approval]

        "✓ Release approval created: {{formats.issueExample}}"
        "✓ PR #245 linked to release approval"
        "✓ Release notes added to PR description"
```

### Example 3: Sprint Release

```
You: "/create-release-approval sprint-42"

Claude: "Analyzing commits for sprint-42 release..."
        "Found 12 issues across 3 categories"

        "Breakdown:"
        "  • 5 bug fixes"
        "  • 4 new features"
        "  • 3 improvements"

        "Who should approve?"

You: "1" (Alice)

Claude: [Creates comprehensive release approval]

        "Sprint-42 release approval ready for review!"
        "URL: https://linear.app/.../{{formats.issueExample}}"
```

## Configuration

Uses your Linear workflow configuration:

- **Target Branch:** {{branches.prod}}
- **Source Branch:** {{branches.staging}} or {{branches.main}}
- **Team:** {{linear.teamName}} ({{linear.teamKey}})
- **Status:** {{linear.statuses.reviewRequired}}
- **Default Assignee:** Configured during setup (optional)

## Smart Features

### Automatic Categorization

Issues are automatically categorized by:
- **Type:** Bug, Feature, Improvement (from labels/title)
- **Priority:** Critical, High, Normal, Low
- **Status:** Completion status in staging

### Summary Generation

For each issue, Claude generates:
- **Issue/Feature/Improvement:** Brief problem statement
- **Fix/Implemented:** Brief solution summary
- **Link:** Direct link to Linear issue

### Checklist Generation

Approval checklist adapts to your workflow:
- Testing requirements
- Documentation updates
- Stakeholder notifications
- Technical readiness

### PR Integration

When creating release PR:
- Automatically detects production deployment
- Offers to create release approval
- Links PR to approval issue
- Adds release notes to PR description

## Benefits

- **Stakeholder visibility** - Non-technical stakeholders can review what's being deployed
- **Approval gate** - Formal checkpoint before production
- **Audit trail** - Complete record of what was released and when
- **Risk mitigation** - Checklist ensures nothing is forgotten
- **Team alignment** - Everyone knows what's going out
- **Documentation** - Release notes generated automatically

## When to Use

**Use this command when:**
- Creating a release PR to production
- Preparing for scheduled deployment
- Need stakeholder approval for release
- Want comprehensive release documentation
- Following formal release process

**Skip this command when:**
- Hotfix deployments (emergency fixes)
- Continuous deployment (every merge goes to prod)
- Development/staging deployments
- No approval process required

## Related Commands

- `/create-pr` - Create pull request (can trigger release approval)
- `/high-priority-linear` - View high-priority items for release consideration
- `/team-work-linear` - Check what's ready for release
- `/my-work-linear` - Check your contributions to release

## Troubleshooting

**No issues found:**
```
Claude: "No Linear issues found between {{branches.staging}} and {{branches.prod}}"

        "This could mean:"
        "  • No new commits to deploy"
        "  • Commits don't reference Linear issues"
        "  • Already up to date"
```

**Cannot detect version:**
```
Claude: "Couldn't detect version from branch name"
        "Please provide version number (e.g., v1.2.0):"
```

**Multiple target branches:**
```
Claude: "You have multiple production branches configured:"
        "  • {{branches.prod}}"
        "  • {{branches.production}}"

        "Which branch for this release?"
```

---

Generated with [Claude Code](https://claude.com/claude-code)
